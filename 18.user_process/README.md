# 用户进程

__PS.对应书中第11章（用户进程）__

本章实现了用户进程。在操作系统层面，用户进程的本质是线程。用户进程的创建、调度、销毁等操作都是基于线程的。
用户进程用到了TSS来维护用户进程的栈空间，但是现代CPU已经不再使用TSS，所以这里只是模拟了TSS的功能。（只用到了TSS的esp0、cs、eip字段）。
具体是“假装”了我们在中断处理环境中，退出中断时会自动切换到TSS的esp0、cs、eip字段。从而从0特权级切换到3特权级。

用户进程在特权级3，因此需要注册新的中断描述符表（GDT），以便在用户态下能够响应中断。

![11.用户进程.svg](../doc/image/11.用户进程.svg)